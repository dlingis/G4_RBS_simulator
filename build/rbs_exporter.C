
#include "TROOT.h"
#include "TFile.h"
#include "TTree.h"
#include "TBrowser.h"
#include "TH2.h"
#include "TRandom.h"


void rbs_exporter()
{
   //read the Tree generated by tree1w and fill two histograms


   if (remove ("test_baba.root") !=0 ) 
	perror ("Error deleting file" );
   else 
	puts (" File succesfully deleted ");


	//TFile *f1 = new TFile("SiO2_proton_sim.root");
	//TFile *f1 = new TFile("SiO2_proton_sim.root");
	//TFile *f1 = new TFile("HfO2_proton_mson.root");
	//TFile *f1 = new TFile("HfO2_Li_mson.root");
	//TFile *f1 = new TFile("Au_Ni_SiO2_Si_148_cornell_acal4det_test_plus.root");
	//TFile *f1 = new TFile("Au_Ni_SiO2_Si_173_cornell_bcal4det_noms.root");
	//TFile *f1 = new TFile("HfO2_Li_mindaugo_const.root");
	//TFile *f1 = new TFile("HfO2_Li_latest_c_fwhm_mono.root");
	//TFile *f1 = new TFile("HfO2_proton_ms_off_v2.root");
//	TFile *f1 = new TFile("HfO2_Li_latest_20fwhm_mono.root");
	//TFile *f1 = new TFile("HfO2_Li_mindaugo_const_ms.root");

	//TFile *f1 = new TFile("Si_xsec_protons_3467.root");
	//TFile *f1 = new TFile("Au_Ni_SiO2_Si_148_cornell_acal4det_mson_testai_minus.root");


	//TFile *f1 = new TFile("h_SiO2.root");
	//TFile *f1 = new TFile("h_SiO2_Nb2O5_SiO2_17keV.root");
	//TFile *f1 = new TFile("h_hfo2.root");
	//TFile *f1 = new TFile("li_hfo2_2792_fwhmc.root");
	//TFile *f1 = new TFile("he_Au_Ni_SiO2_Si_173_fwhmc.root");
	//TFile *f1 = new TFile("he_Au_Ni_SiO2_Si_173_fwhmc_-deg.root");
	//TFile *f1 = new TFile("li_hfo2_2792_fwhmc_ICRU.root");
	TFile *f1 = new TFile("h_hfo2_18775_12kev.root");
	//TFile *f1 = new TFile("h_SiO2_Nb2O5_SiO2_1426.root");
	//TFile *f1 = new TFile("h_SiO2_Nb2O5_SiO2_1426_ms.root");



   TFile *f20 = new TFile("test_baba.root","NEW");

   TTree *t20 = new TTree("tree", "simple tree");

   TH1D*     RBS_tot1 = (TH1D*)f1->Get("RBS_total_energy");



	// Number of bins
  Int_t n1_d = RBS_tot1->GetNbinsX();


	// output to files
	// 0 deg
  ofstream myfile;


  myfile.open ("RBS_LATEST.txt"); 
	
     for (Int_t i=1; i<=n1_d; i++) {
      myfile << (RBS_tot1->GetBinLowEdge(i)+RBS_tot1->GetBinWidth(i)/2) << "\t" << RBS_tot1->GetBinContent(i) << "\n";
	}
   myfile.close();



  if (gROOT->IsBatch()) return;

}

